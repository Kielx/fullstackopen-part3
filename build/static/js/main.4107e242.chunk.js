(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{25:function(e,t,n){e.exports=n(50)},47:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var a=n(5),o=n(0),c=n.n(o),r=n(8),u=n.n(r),l=n(6),s=n.n(l),i=(n(47),n(23)),m=n(13),f=n(24),d="https://fullstackopen-phonebook-api.herokuapp.com/api/persons",h=function(e,t,n,a,o){s.a.post(d,e).then((function(e){return e.data})).then((function(e){n(t.concat(e)),a("".concat(o.name," with phone number ").concat(o.phone," was successfully created")),setTimeout((function(){a("")}),5e3)})).catch((function(e){console.log(e)}))},p=function(e,t,n,a){var o;Object.values(t).forEach((function(t){t.id===e&&(o=t.name)})),window.confirm("Do you really want to delete ".concat(o,"?"))&&s.a.delete("".concat(d,"/").concat(e)).then((function(a,o){200===a.status&&"OK"===a.statusText&&(o=t.filter((function(t){return t.id!==e})),n(o))})).catch((function(e,t){a("".concat(o," does not exist!")),setTimeout((function(){a("")}),5e3),s.a.get("".concat(d)).then((function(e){n(e.data)}))}))},b=function(e,t,n,a,o,c){s.a.patch("http://localhost:3001/persons/".concat(o.id),{phone:a}).then((function(r){var u=e.indexOf(o),l=Object(f.a)(e);l[u]=r.data,t(l),n("".concat(c," phone number was updated to ").concat(a," successfully!")),setTimeout((function(){n("")}),5e3)}))},E=function(e){var t=e.persons,n=e.filteredPersons,a=e.setPersons,o=e.setErrorMessage,r=n.map((function(e){return c.a.createElement("div",{key:e.id},c.a.createElement("li",{id:e.id},e.name," ",e.phone),c.a.createElement("button",{type:"button",className:"btn btn-danger btn-sm",onClick:function(){p(e.id,t,a,o)}},"Delete"))}));return c.a.createElement("ul",null,r)},v=function(e){var t=e.val,n=e.changeHandler,a=e.name;return c.a.createElement("div",null,c.a.createElement("label",{htmlFor:a},a),c.a.createElement("input",{id:a,value:t,onChange:n}))};function w(e){var t=e.newName,n=e.newPhoneNumber,a=e.setNewName,o=e.setNewPhoneNumber,r=e.handleNewNameAdd;return c.a.createElement("form",null,c.a.createElement(v,{val:t,changeHandler:function(e){a(e.target.value)},name:"Name:"}),c.a.createElement(v,{val:n,changeHandler:function(e){o(e.target.value)},name:"Phone number:"}),c.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:r},"Add new phonebook record"))}var N=function(e){var t=e.filter,n=e.setFilter;return c.a.createElement(v,{val:t,changeHandler:function(e){n(e.target.value)},name:"Filter results"})},O=function(){var e=Object(o.useState)(""),t=Object(a.a)(e,2),n=t[0],r=t[1],u=Object(o.useState)(""),l=Object(a.a)(u,2),f=l[0],d=l[1],p=Object(o.useState)(""),v=Object(a.a)(p,2),O=v[0],j=v[1],g=Object(o.useState)(""),k=Object(a.a)(g,2),y=k[0],P=k[1],S=Object(o.useState)(""),x=Object(a.a)(S,2),C=x[0],T=x[1],F=Object(o.useState)(""),H=Object(a.a)(F,2),A=H[0],D=H[1],L=Object(o.useState)(""),J=Object(a.a)(L,2),M=J[0],B=J[1],I=function(){d(""),j("")};return Object(o.useEffect)((function(){s.a.get("https://fullstackopen-phonebook-api.herokuapp.com/api/persons").then((function(e){r(e.data)}))}),[]),Object(o.useEffect)((function(){n?function(){var e=n.filter((function(e){return e.name.toLowerCase().includes(y.toLowerCase())}));T(e)}():T("")}),[y,n]),c.a.createElement("div",null,c.a.createElement(N,{filter:y,setFilter:P}),c.a.createElement("h2",null,"Phonebook"),c.a.createElement(w,{newName:f,newPhoneNumber:O,setNewName:d,setNewPhoneNumber:j,handleNewNameAdd:function(e){var t;e.preventDefault();var a=!1;if(n.forEach((function(e){Object.values(e).includes(f)&&(a=!0,t=e)})),a&&window.confirm("The name ".concat(t.name," already exists, do you want to update the phone number for selected person?")))b(n,r,B,O,t,f),I();else{var o={name:f,phone:O};h(o,n,r,B,o),I()}}}),c.a.createElement("h2",null,"Numbers"),M?c.a.createElement(m.a,{variant:"success"},M):null,A?c.a.createElement(m.a,{variant:"danger"},A):null,"object"===typeof C?c.a.createElement(E,{persons:n,filteredPersons:C,setPersons:r,setErrorMessage:D}):c.a.createElement(i.a,{animation:"border",role:"status"},c.a.createElement("span",{className:"sr-only"},"Loading...")))};u.a.render(c.a.createElement(O,null),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.4107e242.chunk.js.map