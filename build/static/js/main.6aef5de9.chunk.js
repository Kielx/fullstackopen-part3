(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{25:function(e,t,n){e.exports=n(50)},47:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var a=n(5),c=n(0),o=n.n(c),r=n(8),u=n.n(r),s=n(6),l=n.n(s),i=(n(47),n(23)),m=n(13),f=n(24),d=function(e,t,n,a,c,o){l.a.post("/api/persons",e).then((function(e){return e.data})).then((function(e){n(t.concat(e)),a("".concat(o.name," with phone number ").concat(o.phone," was successfully created")),setTimeout((function(){a("")}),5e3)})).catch((function(e){c("Data provided is invalid"),setTimeout((function(){c("")}),5e3)}))},b=function(e,t,n,a){var c;Object.values(t).forEach((function(t){t.id===e&&(c=t.name)})),window.confirm("Do you really want to delete ".concat(c,"?"))&&l.a.delete("".concat("/api/persons","/").concat(e)).then((function(a,c){200===a.status&&"OK"===a.statusText&&(c=t.filter((function(t){return t.id!==e})),n(c))})).catch((function(e,t){a("".concat(c," does not exist!")),setTimeout((function(){a("")}),5e3),l.a.get("".concat("/api/persons")).then((function(e){n(e.data)}))}))},h=function(e,t,n,a,c,o){l.a.patch("http://localhost:3001/persons/".concat(c.id),{phone:a}).then((function(r){var u=e.indexOf(c),s=Object(f.a)(e);s[u]=r.data,t(s),n("".concat(o," phone number was updated to ").concat(a," successfully!")),setTimeout((function(){n("")}),5e3)}))},p=function(e){var t=e.persons,n=e.filteredPersons,a=e.setPersons,c=e.setErrorMessage,r=n.map((function(e){return o.a.createElement("div",{key:e.id},o.a.createElement("li",{id:e.id},e.name," ",e.phone),o.a.createElement("button",{type:"button",className:"btn btn-danger btn-sm",onClick:function(){b(e.id,t,a,c)}},"Delete"))}));return o.a.createElement("ul",null,r)},v=function(e){var t=e.val,n=e.changeHandler,a=e.name;return o.a.createElement("div",null,o.a.createElement("label",{htmlFor:a},a),o.a.createElement("input",{id:a,value:t,onChange:n}))};function E(e){var t=e.newName,n=e.newPhoneNumber,a=e.setNewName,c=e.setNewPhoneNumber,r=e.handleNewNameAdd;return o.a.createElement("form",null,o.a.createElement(v,{val:t,changeHandler:function(e){a(e.target.value)},name:"Name:"}),o.a.createElement(v,{val:n,changeHandler:function(e){c(e.target.value)},name:"Phone number:"}),o.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:r},"Add new phonebook record"))}var w=function(e){var t=e.filter,n=e.setFilter;return o.a.createElement(v,{val:t,changeHandler:function(e){n(e.target.value)},name:"Filter results"})},N=function(){var e=Object(c.useState)(""),t=Object(a.a)(e,2),n=t[0],r=t[1],u=Object(c.useState)(""),s=Object(a.a)(u,2),f=s[0],b=s[1],v=Object(c.useState)(""),N=Object(a.a)(v,2),O=N[0],j=N[1],g=Object(c.useState)(""),y=Object(a.a)(g,2),P=y[0],k=y[1],S=Object(c.useState)(""),T=Object(a.a)(S,2),x=T[0],C=T[1],D=Object(c.useState)(""),F=Object(a.a)(D,2),H=F[0],A=F[1],L=Object(c.useState)(""),J=Object(a.a)(L,2),M=J[0],B=J[1],I=function(){b(""),j("")};return Object(c.useEffect)((function(){l.a.get("/api/persons").then((function(e){r(e.data)}))}),[]),Object(c.useEffect)((function(){n?function(){var e=n.filter((function(e){return e.name.toLowerCase().includes(P.toLowerCase())}));C(e)}():C("")}),[P,n]),o.a.createElement("div",null,o.a.createElement(w,{filter:P,setFilter:k}),o.a.createElement("h2",null,"Phonebook"),o.a.createElement(E,{newName:f,newPhoneNumber:O,setNewName:b,setNewPhoneNumber:j,handleNewNameAdd:function(e){var t;e.preventDefault();var a=!1;if(n.forEach((function(e){Object.values(e).includes(f)&&(a=!0,t=e)})),a&&window.confirm("The name ".concat(t.name," already exists, do you want to update the phone number for selected person?")))h(n,r,B,O,t,f),I();else{var c={name:f,phone:O};d(c,n,r,B,A,c),I()}}}),o.a.createElement("h2",null,"Numbers"),M?o.a.createElement(m.a,{variant:"success"},M):null,H?o.a.createElement(m.a,{variant:"danger"},H):null,"object"===typeof x?o.a.createElement(p,{persons:n,filteredPersons:x,setPersons:r,setErrorMessage:A}):o.a.createElement(i.a,{animation:"border",role:"status"},o.a.createElement("span",{className:"sr-only"},"Loading...")))};u.a.render(o.a.createElement(N,null),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.6aef5de9.chunk.js.map